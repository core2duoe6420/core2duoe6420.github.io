<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Cross-Compiling an ARM Native GCC","datePublished":"2014-09-10T00:00:00Z","dateModified":"2014-09-10T00:00:00Z","author":{"@type":"Person","name":"Alex King","image":"https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.hljin.net\/en-us\/2014\/09\/cross-compile-arm-natvie-gcc\/"},"publisher":{"@type":"Organization","name":"Alex King's blog","logo":{"@type":"ImageObject","url":"https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg"}},"description":" This article is translated from Chinese to English by ChatGPT. There might be errors.\nSome time ago I learned to use IP tunnel to build a tunnel so that machines without native IPv6 could use IPv6. I was itching to get IPv6 at home in advance as well, so I finally bit the bullet and bought the R6300v2 I’d been eyeing for a long time. With ddwrt on it, IPv6 worked smoothly.\n","keywords":[]}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.111.3 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Alex King"><meta name=keywords content><meta name=description content="
  This article is translated from Chinese to English by ChatGPT. There might be errors.

Some time ago I learned to use IP tunnel to build a tunnel so that machines without native IPv6 could use IPv6. I was itching to get IPv6 at home in advance as well, so I finally bit the bullet and bought the R6300v2 I’d been eyeing for a long time. With ddwrt on it, IPv6 worked smoothly."><meta property="og:description" content="
  This article is translated from Chinese to English by ChatGPT. There might be errors.

Some time ago I learned to use IP tunnel to build a tunnel so that machines without native IPv6 could use IPv6. I was itching to get IPv6 at home in advance as well, so I finally bit the bullet and bought the R6300v2 I’d been eyeing for a long time. With ddwrt on it, IPv6 worked smoothly."><meta property="og:type" content="article"><meta property="og:title" content="Cross-Compiling an ARM Native GCC"><meta name=twitter:title content="Cross-Compiling an ARM Native GCC"><meta property="og:url" content="https://blog.hljin.net/en-us/2014/09/cross-compile-arm-natvie-gcc/"><meta property="twitter:url" content="https://blog.hljin.net/en-us/2014/09/cross-compile-arm-natvie-gcc/"><meta property="og:site_name" content="Alex King's blog"><meta property="og:description" content="
  This article is translated from Chinese to English by ChatGPT. There might be errors.

Some time ago I learned to use IP tunnel to build a tunnel so that machines without native IPv6 could use IPv6. I was itching to get IPv6 at home in advance as well, so I finally bit the bullet and bought the R6300v2 I’d been eyeing for a long time. With ddwrt on it, IPv6 worked smoothly."><meta name=twitter:description content="
  This article is translated from Chinese to English by ChatGPT. There might be errors.

Some time ago I learned to use IP tunnel to build a tunnel so that machines without native IPv6 could use IPv6. I was itching to get IPv6 at home in advance as well, so I finally bit the bullet and bought the R6300v2 I’d been eyeing for a long time. With ddwrt on it, IPv6 worked smoothly."><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2014-09-10T00:00:00"><meta property="article:modified_time" content="2014-09-10T00:00:00"><meta name=twitter:card content="summary"><meta property="og:image" content="https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg"><meta property="twitter:image" content="https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg"><title>Cross-Compiling an ARM Native GCC</title><link rel=icon href=https://blog.hljin.net/favicon.png><link rel=canonical href=https://blog.hljin.net/en-us/2014/09/cross-compile-arm-natvie-gcc/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.css integrity="sha512-MLcK/YRapzET1qTBXrOiZE6bGBgtATMo2bIyalVJ8EKDEGNoeA3SPQkvWAR0zNS650YG13ocXBMeioDuZcSRuQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://blog.hljin.net/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css><link rel=stylesheet href=https://blog.hljin.net/css/override.css></head><body><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://blog.hljin.net/en-us/ aria-label="Go to homepage">Alex King's blog</a></div><a class=header-right-picture href=https://blog.hljin.net/#about aria-label="Open the link: /#about"><img class=header-picture src=https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg alt="Author's picture"></a></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=https://blog.hljin.net/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg alt="Author's picture"></a><h4 class=sidebar-profile-name>Alex King</h4><h5 class=sidebar-profile-bio>Observing without evaluating is the highest form of human intelligence</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.hljin.net/en-us/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.hljin.net/en-us/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.hljin.net/en-us/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.hljin.net/en-us/archives title=Archives><i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i>
<span class=sidebar-button-desc>Archives</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.hljin.net/en-us/#about title=About><i class="sidebar-button-icon fas fa-lg fa-user" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/core2duoe6420 target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>Cross-Compiling an ARM Native GCC</h1><div class="postShorten-meta post-meta"><time datetime=2014-09-10T00:00:00Z>September 10, 2014</time></div></div><div class="post-content markdown"><div class=main-content-wrap><div class="alert warning"><p>This article is translated from Chinese to English by ChatGPT. There might be errors.</p></div><p>Some time ago I learned to use IP tunnel to build a tunnel so that machines without native IPv6 could use IPv6. I was itching to get IPv6 at home in advance as well, so I finally bit the bullet and bought the R6300v2 I’d been eyeing for a long time. With ddwrt on it, IPv6 worked smoothly.</p><p>The R6300v2 is equipped with BCM4708, an ARM Cortex-A9 dual-core 800MHz CPU. The latest ddwrt kernel version is 3.10.25, which is quite new, so I wondered if I could run GCC on the router and compile programs there. I searched online for a long time but couldn’t find any GCC that could run directly on the router. However, there were plenty of cross-compilers that could generate binaries runnable on the router; openwrt has tons of them.</p><p>I had no real cross-compilation experience, but during winter vacation I read a book called “深度探索Linux操作系统 系统构建和原理解析” (hereafter referred to as “简析”). Back then I followed the book step by step and did manage to succeed, but I didn’t understand much of what was going on. So I had the idea to build from scratch a GCC that could run on the router, which started a four-day-long hacking journey.</p><h2 id=environment>Environment</h2><p>Host machine: <code>Ubuntu 14.04 64-bit, gcc 4.8.2</code></p><p>Toolchain versions: <code>binutils-2.24 gcc-4.9.1 glibc-2.19 linux-3.10.25</code> (because the ddwrt kernel I installed is 3.10.25)</p><p>Compiling gcc requires three extra libraries: gmp, mpc, mpfr. After downloading and extracting them, rename the directories from gmp-version, mpc-version, mpfr-version to gmp, mpc, mpfr, and then put them under the gcc-4.9.1 directory. Newer gcc versions can correctly handle the locations of these libraries without extra options (gcc-4.7.4 needs <code>--with-mpfr-include</code> and <code>--with-mpfr-lib</code> during configure; that was one of the lessons learned while hacking on this).</p><p>The first thing in cross-compilation is to determine the target machine’s triplet, i.e., arch-vendor-os. On Ubuntu this triplet is <code>x86_64-pc-linux-gnu</code>, while on the R6300v2, after some experimentation, I ultimately used <code>arm-ddwrt-linux-gnueabi</code>. This triplet is very important because it affects how the C library is built. You can often see <code>arm-none-eabi</code> online, which means there is no operating system and newlib is used as the C library. I also tried this triplet during my experiments, and later realized that without an operating system this clearly wasn’t what I needed. Then there is the trailing <code>gnueabi</code>, and also the variant <code>gnueabihf</code>, which indicates that the CPU has an FPU; I guess hf stands for hard float. But supposedly routers don’t need floating point operations, so the R6300v2 has its FPU disabled -:(… Another type is the cross-compiler I found online: <code>arm-openwrt-linux-uclibcgnueabi</code>, which means it uses uclibc as the C library. ddwrt also comes with uclibc, so binaries compiled with this toolchain can run on the R6300v2. You can also see that the vendor field doesn’t really matter; you can name it however you like…</p><p>After extracting all source code, we need to apply a patch to gcc. My situation is somewhat special: the / mount point on the router is read-only, which means I can’t write files under conventional directories like /lib and /usr. Besides, the router’s internal storage can’t hold giants like gcc and glibc anyway. Fortunately, the R6300v2 has a USB port so I can plug in a USB storage device. I mount the USB drive under <code>/tmp/mnt/usb</code> (because /tmp is a ramfs and writable), put glibc’s library files under <code>/tmp/mnt/usb/lib</code>, and files under /usr into <code>/tmp/mnt/usb/usr</code>. However, the dynamic linker loaded by the OS when a program starts is hard-coded into gcc’s code, so we need to modify the dynamic linker’s location.</p><p>You can inspect the dynamic linker via <code>readelf -l a.out</code>. The output will contain a line like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>[Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
</span></span></code></pre></div><p>This is the output on my Ubuntu x86_64 system, while what I want is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>[Requesting program interpreter: /tmp/mnt/usb/lib/ld-linux.so.3]
</span></span></code></pre></div><p>Run the following code under the gcc-4.9.1 directory to apply the patch. The code comes from the LFS tutorial; I added linux-eabi.h because my target is ARM while LFS targets x86.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>for file in $(find gcc/config -name linux64.h -o -name linux.h -o -name sysv4.h -o -name linux-eabi.h)
</span></span><span style=display:flex><span>do
</span></span><span style=display:flex><span>    cp -uv $file{,.orig}
</span></span><span style=display:flex><span>    sed -e &#39;s@/lib\(64\)\?\(32\)\?/ld@/tmp/mnt/usb&amp;@g&#39; \
</span></span><span style=display:flex><span>    -e &#39;s@/usr@/tmp/mnt/usb@g&#39; $file.orig &gt; $file
</span></span><span style=display:flex><span>    echo &#39;
</span></span><span style=display:flex><span>#undef STANDARD_STARTFILE_PREFIX_1
</span></span><span style=display:flex><span>#undef STANDARD_STARTFILE_PREFIX_2
</span></span><span style=display:flex><span>#define STANDARD_STARTFILE_PREFIX_1 &#34;/tmp/mnt/usb/lib/&#34;
</span></span><span style=display:flex><span>#define STANDARD_STARTFILE_PREFIX_2 &#34;&#34;&#39; &gt;&gt; $file
</span></span><span style=display:flex><span>    touch $file.orig
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><h2 id=environment-variables>Environment Variables</h2><p>These are the environment variables I used in the commands; their origins have all been explained above. BUILD_DIR is the working directory for building. Note that the CROSS_TOOL directory contains cross-compilation tools that run on x86, while the SYSROOT directory contains programs that run on the R6300v2, including the final gcc, glibc libraries, and header files. The sysroot mechanism during cross-toolchain building is quite complicated, and I didn’t fully understand it either… As for why <code>/vita</code>, it’s because at first I followed “简析”, and the book uses <code>/vita</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>THREADS=2
</span></span><span style=display:flex><span>TARGET=arm-ddwrt-linux-gnueabi
</span></span><span style=display:flex><span>HOST=x86_64-pc-linux-gnu
</span></span><span style=display:flex><span>BUILD=$HOST
</span></span><span style=display:flex><span>INSTALL_ROOT=/vita
</span></span><span style=display:flex><span>SYSROOT=$INSTALL_ROOT/sysroot
</span></span><span style=display:flex><span>CROSS_TOOL=$INSTALL_ROOT/cross-tool
</span></span><span style=display:flex><span>HOST_ROOT_PREFIX=/tmp/mnt
</span></span><span style=display:flex><span>HOST_ROOT=$HOST_ROOT_PREFIX/usb
</span></span><span style=display:flex><span>BUILD_DIR=$INSTALL_ROOT/build
</span></span></code></pre></div><h2 id=binutils-round-1>binutils round 1</h2><p>The first step in cross-compilation is always binutils. The goal is to build ld, as, etc., that run on x86 and generate ARM object code. Script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cd binutils-build
</span></span><span style=display:flex><span>../binutils-2.24/configure                          \
</span></span><span style=display:flex><span>    --prefix=$CROSS_TOOL                            \
</span></span><span style=display:flex><span>    --with-sysroot=$SYSROOT                         \
</span></span><span style=display:flex><span>    --target=$TARGET                                \
</span></span><span style=display:flex><span>    --disable-nls                                   \
</span></span><span style=display:flex><span>    --disable-libssp
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>Option explanations (all option explanations are based on my own understanding, and may not be correct—in fact, the chances of errors are quite high; I copied many from the internet but they worked):</p><ul><li><code>--disable-nls</code>: nls means Native Language Support, i.e., only English messages during compilation.</li><li><code>--disable-libssp</code>: ssp seems to be some kind of stack protection; I don’t know why it’s disabled, but everyone disables it anyway…</li></ul><h2 id=gcc-round-1>gcc round 1</h2><p>The first gcc build aims to produce a minimal usable gcc without C library support, and then use it to build glibc. The key options are <code>--without-headers</code> and <code>--with-newlib</code>; they tell gcc to use its own built-in headers. Script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cd ../gcc-build
</span></span><span style=display:flex><span>../gcc-4.9.1/configure                              \
</span></span><span style=display:flex><span>    --target=$TARGET                                \
</span></span><span style=display:flex><span>    --prefix=$CROSS_TOOL                            \
</span></span><span style=display:flex><span>    --with-sysroot=$SYSROOT                         \
</span></span><span style=display:flex><span>    --with-newlib                                   \
</span></span><span style=display:flex><span>    --without-headers                               \
</span></span><span style=display:flex><span>    --disable-nls                                   \
</span></span><span style=display:flex><span>    --disable-shared                                \
</span></span><span style=display:flex><span>    --disable-multilib                              \
</span></span><span style=display:flex><span>    --disable-decimal-float                         \
</span></span><span style=display:flex><span>    --disable-threads                               \
</span></span><span style=display:flex><span>    --disable-libatomic                             \
</span></span><span style=display:flex><span>    --disable-libgomp                               \
</span></span><span style=display:flex><span>    --disable-libitm                                \
</span></span><span style=display:flex><span>    --disable-libquadmath                           \
</span></span><span style=display:flex><span>    --disable-libsanitizer                          \
</span></span><span style=display:flex><span>    --disable-libssp                                \
</span></span><span style=display:flex><span>    --disable-libmudflap                            \
</span></span><span style=display:flex><span>    --disable-libvtv                                \
</span></span><span style=display:flex><span>    --disable-libcilkrts                            \
</span></span><span style=display:flex><span>    --disable-libstdc++-v3                          \
</span></span><span style=display:flex><span>    --enable-languages=c                            \
</span></span><span style=display:flex><span>    --with-float=soft                               \
</span></span><span style=display:flex><span>    --with-local-prefix=$HOST_ROOT/usr/local        \
</span></span><span style=display:flex><span>    --with-native-system-header-dir=$HOST_ROOT/usr/include
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>Option explanations:</p><ul><li><code>--target</code>: when the target and host parameters differ, cross-compilation is enabled. If host is not specified, gcc automatically uses the current triplet.</li><li><code>--prefix</code>: this only affects the installation location of the final gcc.</li><li><code>--disable-xxx</code>: in the first build we disable most features because we can’t build them without a C library.</li><li><code>--with-float=soft</code>: most <code>--with-xxx</code> options in gcc’s configure are used to specify default options that the resulting gcc will use when compiling other programs, such as <code>--with-cpu</code>, <code>--with-arch</code>, etc. With this option, when using the resulting gcc to compile other programs, it will automatically pass <code>-msoft-float</code> (not sure if this understanding is correct; you can refer to <a href=https://gcc.gnu.org/install/configure.html>Installing GCC: Configuration</a> and <a href=https://gcc.gnu.org/onlinedocs/gcc-4.5.3/gcc/ARM-Options.html>ARM Options</a>).</li><li><code>--with-local-prefix</code>: this adds the directory into gcc’s default header search path. The default is <code>/usr/local</code>. You don’t need to append <code>include</code> in the option, but in practice it looks in <code>/usr/local/include</code>. The reason for changing it here is the issue mentioned in the previous section.</li><li><code>--with-native-system-header-dir</code>: this option is actually not used in the first gcc build; it’s used starting from the second build. Together with <code>--with-sysroot</code> it specifies where to look for headers <strong>during the build</strong> and where the resulting gcc will look for system headers. So the final header search path is <code>$SYSROOT/$HOST_ROOT/usr/include</code>. For this we need to install both the Linux kernel headers and glibc headers to that location.</li></ul><h2 id=kernel-headers>Kernel Headers</h2><p>Installing kernel headers is fairly straightforward. Pay attention to the ARCH parameter and the installation location; the reasons were explained when discussing gcc options above.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cd ../linux-3.0.25
</span></span><span style=display:flex><span>make mrproper
</span></span><span style=display:flex><span>make ARCH=arm INSTALL_HDR_PATH=$SYSROOT/$HOST_ROOT/usr headers_install
</span></span></code></pre></div><h2 id=glibc>glibc</h2><p>With the initial gcc in place, we can use it to build glibc. In glibc’s configure, <code>--host</code> indicates that we are building glibc to run on the target machine, so the resulting glibc cannot run directly on x86 Ubuntu. glibc has no concept of target.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cd ../glibc-build
</span></span><span style=display:flex><span>rm -rf *
</span></span><span style=display:flex><span>../glibc-2.19/configure                             \
</span></span><span style=display:flex><span>    --prefix=$HOST_ROOT                             \
</span></span><span style=display:flex><span>    --host=$TARGET                                  \
</span></span><span style=display:flex><span>    --disable-profile                               \
</span></span><span style=display:flex><span>    --enable-kernel=2.6.32                          \
</span></span><span style=display:flex><span>    --with-headers=$SYSROOT/$HOST_ROOT/usr/include  \
</span></span><span style=display:flex><span>    libc_cv_forced_unwind=yes                       \
</span></span><span style=display:flex><span>    libc_cv_ctors_header=yes                        \
</span></span><span style=display:flex><span>    libc_cv_c_cleanup=yes
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install_root=$SYSROOT install
</span></span></code></pre></div><p>Option explanations:</p><ul><li><code>--prefix</code>: specifies the installation directory. glibc’s install scripts also embed this value into the libraries’ dependencies so that, on the target system, libraries will look for dynamic libraries in the corresponding directory. That’s why we don’t include $SYSROOT here, but instead specify the installation directory as $SYSROOT during <code>make install</code>.</li><li><code>--with-headers</code>: specifies the Linux kernel headers directory, i.e., the location where we just installed them.</li><li><code>libc_cv_*</code>: these three are used to “cheat” glibc. For details, see <a href=http://www.linuxfromscratch.org/lfs/view/development/chapter05/glibc.html>Linux From Scratch 5.7 Glibc-2.19</a>.</li></ul><p>After glibc is installed, by default it puts headers under <code>$SYSROOT/$HOST_ROOT/include</code>. According to what was said above, we need to move them to <code>$SYSROOT/$HOST_ROOT/usr/include</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cp -r $SYSROOT/$HOST_ROOT/include $SYSROOT/$HOST_ROOT/usr/
</span></span></code></pre></div><h2 id=gcc-round-2>gcc round 2</h2><p>Now that we have glibc, we can rebuild gcc and enable most features.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cd ../gcc-build
</span></span><span style=display:flex><span>rm -rf *
</span></span><span style=display:flex><span>../gcc-4.9.1/configure                              \
</span></span><span style=display:flex><span>    --target=$TARGET                                \
</span></span><span style=display:flex><span>    --prefix=$CROSS_TOOL                            \
</span></span><span style=display:flex><span>    --with-sysroot=$SYSROOT                         \
</span></span><span style=display:flex><span>    --disable-nls                                   \
</span></span><span style=display:flex><span>    --enable-shared                                 \
</span></span><span style=display:flex><span>    --disable-multilib                              \
</span></span><span style=display:flex><span>    --enable-threads=posix                          \
</span></span><span style=display:flex><span>    --enable-languages=c,c++                        \
</span></span><span style=display:flex><span>    --disable-libssp                                \
</span></span><span style=display:flex><span>    --disable-decimal-float                         \
</span></span><span style=display:flex><span>    --disable-libgomp                               \
</span></span><span style=display:flex><span>    --with-float=soft                               \
</span></span><span style=display:flex><span>    --with-local-prefix=$HOST_ROOT/usr/local        \
</span></span><span style=display:flex><span>    --with-native-system-header-dir=$HOST_ROOT/usr/include
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>Option explanations:</p><ul><li><code>--disable-decimal-float</code>: at one point the build complained that the target system does not support decimal-float, so I disabled it.</li><li><code>--disable-multilib --disable-libgomp</code>: without these, the build fails (libiberty and zlib errors; I don’t know the exact reason).</li><li><code>--with-native-system-header-dir</code>: this option now starts to take effect.</li></ul><p>After this round, gcc as a cross-compilation tool is complete. Binaries compiled with it should run correctly on the R6300v2 (assuming glibc libraries are in the correct location, i.e., under <code>/tmp/mnt/usb/lib</code>). Write a hello world and inspect the ELF header via readelf:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>vita@cc-virtual-machine:/vita$ arm-ddwrt-linux-gnueabi-gcc a.c
</span></span><span style=display:flex><span>vita@cc-virtual-machine:/vita$ ./a.out
</span></span><span style=display:flex><span>-su: ./a.out: cannot execute binary file: Exec format error
</span></span><span style=display:flex><span>vita@cc-virtual-machine:/vita$ readelf -h a.out
</span></span><span style=display:flex><span>ELF Header:
</span></span><span style=display:flex><span>  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
</span></span><span style=display:flex><span>  Class:                             ELF32
</span></span><span style=display:flex><span>  Data:                              2&#39;s complement, little endian
</span></span><span style=display:flex><span>  Version:                           1 (current)
</span></span><span style=display:flex><span>  OS/ABI:                            UNIX - System V
</span></span><span style=display:flex><span>  ABI Version:                       0
</span></span><span style=display:flex><span>  Type:                              EXEC (Executable file)
</span></span><span style=display:flex><span>  Machine:                           ARM
</span></span><span style=display:flex><span>  Version:                           0x1
</span></span><span style=display:flex><span>  Entry point address:               0x82d0
</span></span><span style=display:flex><span>  Start of program headers:          52 (bytes into file)
</span></span><span style=display:flex><span>  Start of section headers:          4444 (bytes into file)
</span></span><span style=display:flex><span>  Flags:                             0x5000202, has entry point, Version5 EABI, soft-float ABI
</span></span><span style=display:flex><span>  Size of this header:               52 (bytes)
</span></span><span style=display:flex><span>  Size of program headers:           32 (bytes)
</span></span><span style=display:flex><span>  Number of program headers:         8
</span></span><span style=display:flex><span>  Size of section headers:           40 (bytes)
</span></span><span style=display:flex><span>  Number of section headers:         37
</span></span><span style=display:flex><span>  Section header string table index: 34
</span></span></code></pre></div><h2 id=binutils-round-2>binutils round 2</h2><p>The second binutils build aims to produce ld, as, etc. that run on the R6300v2. The key option is <code>--host</code>. Once this option is specified, the makefile will call <code>$TARGET-gcc</code> (i.e., <code>arm-ddwrt-linux-gnueabi-gcc</code>) and related cross tools to build binutils instead of using Ubuntu’s native compiler.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>cd ../binutils-build
</span></span><span style=display:flex><span>rm -rf *
</span></span><span style=display:flex><span>../binutils-2.24/configure                          \
</span></span><span style=display:flex><span>    --prefix=$SYSROOT/$HOST_ROOT/usr                \
</span></span><span style=display:flex><span>    --with-sysroot                                  \
</span></span><span style=display:flex><span>    --host=$TARGET                                  \
</span></span><span style=display:flex><span>    --disable-nls                                   \
</span></span><span style=display:flex><span>    --disable-libssp                                \
</span></span><span style=display:flex><span>    --disable-werror
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>Option explanations:</p><ul><li><code>--prefix</code>: since we want binutils that run on the R6300v2, we install them under the target directory.</li><li><code>--disable-werror</code>: without this, the build stops because warnings are treated as errors.</li></ul><h2 id=gcc-round-3>gcc round 3</h2><p>The third gcc build is, of course, to produce a gcc that runs on the R6300v2. Before starting, we need to copy files under <code>$SYSROOT/$HOST_ROOT/usr/include</code> to <code>$HOST_ROOT/usr/include</code> on Ubuntu, i.e., to <code>/tmp/mnt/usb/usr/include</code>, because the resulting gcc is to run on R6300v2, and <code>--with-sysroot</code> can no longer be set to <code>$SYSROOT</code> as in the previous two rounds; it must be <code>/</code>. So headers must be placed in the directory specified directly by <code>--with-native-system-header-dir</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>rm -rf $HOST_ROOT_PREFIX
</span></span><span style=display:flex><span>mkdir -p $HOST_ROOT/usr
</span></span><span style=display:flex><span>cp -r $SYSROOT/$HOST_ROOT/usr/include $HOST_ROOT/usr
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd ../gcc-build
</span></span><span style=display:flex><span>rm -rf *
</span></span><span style=display:flex><span>../gcc-4.9.1/configure                              \
</span></span><span style=display:flex><span>    --build=x86_64-pc-linux-gnu                     \
</span></span><span style=display:flex><span>    --target=$TARGET                                \
</span></span><span style=display:flex><span>    --host=$TARGET                                  \
</span></span><span style=display:flex><span>    --with-sysroot=/                                \
</span></span><span style=display:flex><span>    --prefix=$SYSROOT/$HOST_ROOT/usr                \
</span></span><span style=display:flex><span>    --disable-nls                                   \
</span></span><span style=display:flex><span>    --enable-shared                                 \
</span></span><span style=display:flex><span>    --disable-multilib                              \
</span></span><span style=display:flex><span>    --disable-decimal-float                         \
</span></span><span style=display:flex><span>    --enable-threads=posix                          \
</span></span><span style=display:flex><span>    --disable-libgomp                               \
</span></span><span style=display:flex><span>    --disable-libssp                                \
</span></span><span style=display:flex><span>    --enable-languages=c,c++                        \
</span></span><span style=display:flex><span>    --enable-__cxa_atexit                           \
</span></span><span style=display:flex><span>    --with-float=soft                               \
</span></span><span style=display:flex><span>    --disable-libstdcxx-pch                         \
</span></span><span style=display:flex><span>    --disable-bootstrap                             \
</span></span><span style=display:flex><span>    --with-local-prefix=$HOST_ROOT/usr/local        \
</span></span><span style=display:flex><span>    --with-native-system-header-dir=$HOST_ROOT/usr/include 
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>Option explanations:</p><ul><li><code>--with-sysroot</code>: because this gcc is meant to run on the R6300v2, we can’t set sysroot to <code>$SYSROOT</code> as before; otherwise gcc would look for headers and libraries in the wrong locations on the router.</li><li><code>--disable-bootstrap</code>: gcc has a mechanism where it uses the newly built gcc to rebuild itself to see whether it can be built successfully. Enabling this here causes build errors for reasons unknown; again, refer to <a href=https://gcc.gnu.org/install/configure.html>Installing GCC: Configuration</a>.</li></ul><h2 id=conclusion>Conclusion</h2><p>At this point gcc runs successfully on the R6300v2, though it’s not perfect yet: programs compiled with g++ trigger a segmentation fault on exit. I don’t yet know why, and I don’t feel like digging deeper for now. After all, gcc itself works fine, which fulfills my original goal. But turning the router into a fully functional build environment is still far off: it lacks make, various libraries, etc., and it’s not realistic anyway given the limited CPU power. It’s better to use the cross-toolchain to build everything and then deploy the binaries to the router.</p><p>During these four days of hacking, I compiled gcc about twenty times. The Pentium G2020 at home is too weak; a single build takes more than half an hour. It was exhausting both mentally and physically, and I was hanging on purely out of stubbornness. It also made me deeply realize that blind tinkering without theory is a waste of time. So I’d better study properly.</p><h2 id=postscript>Postscript</h2><p>After finishing this article yesterday, I was excited to use the freshly built native gcc to compile some of my old programs as a test. If it couldn’t even handle my small programs, that would be a joke. I picked one of my earlier programs that doesn’t depend on other libraries—the PL0 interpreter I wrote in my third year—and started compiling. The first step was to build make for the R6300v2.</p><h4 id=make>make</h4><p>The make version I downloaded is 3.8.2; the latest seems to be 4.0.0. Building make is straightforward. Just install it under the target system’s directory.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>./configure --host=$TARGET --prefix=$SYSROOT/$HOST_ROOT/usr/
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>After make was built, I copied the PL0 code to the router and started building. Compilation succeeded! I was very happy. Then I ran it: <code>segmentation fault</code>! I was puzzled—this program runs fine on x86, so maybe gcc or something else was broken again. I added a few printf statements to quickly locate the problem and found it was in the lexical analysis part. The code was so old that I no longer remembered the internal structure, let alone fixing it. In a fit of determination, I decided to compile gdb for debugging, and hacked for a while again.</p><h4 id=gdb>gdb</h4><p>gdb depends on termcap, so first I downloaded <code>termcap-1.3.1.tar.gz</code> from the internet. This is a very old package. Build and install it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>./configure --prefix=/vita/termcap --host=$TARGET
</span></span><span style=display:flex><span>make
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>termcap builds a static library <code>libtermcap.a</code>, so I got lazy and didn’t install it into the target system directory, but just dropped it into some directory.</p><p>With termcap built, I could then build gdb. First specify the termcap location with a few environment variables:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>export LDFLAGS=&#34;-static -L/vita/termcap/lib&#34;
</span></span><span style=display:flex><span>export CPPFLAGS=&#34;-I/vita/termcap/include&#34;
</span></span><span style=display:flex><span>export CFLAGS=&#34;-I/vita/termcap/include&#34;
</span></span></code></pre></div><p>Then compile as usual:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-no-highlight data-lang=no-highlight><span style=display:flex><span>../gdb-7.8/configure --host=$TARGET --prefix=$SYSROOT/$HOST_ROOT/usr/
</span></span><span style=display:flex><span>make -j $THREADS
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><h3 id=the-problem>The Problem</h3><p>With everything ready, I started debugging with gdb and found the problem lay in a while loop; it appeared to be an infinite loop leading to out-of-bounds access and a segmentation fault. But this code runs perfectly on x86, so it shouldn’t be an algorithm issue. Since the loop never exited, I checked the loop condition:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>    <span style=color:#66d9ef>while</span>((ch <span style=color:#f92672>=</span> <span style=color:#a6e22e>buffer_get_next</span>(buf)) <span style=color:#f92672>!=</span> EOF)
</span></span></code></pre></div><p>I printed ch and saw 255. What, 255? It should be -1. I immediately wrote a small test program. It turned out that EOF is indeed -1, but once assigned to a char variable ch, it became 255, so the equality test was always false. A quick search online showed that this is indeed the case: on ARM, gcc uses unsigned char by default for char, unlike x86 where char is signed by default. The C standard allows compilers to decide whether char is signed or unsigned.</p><p>At this point the problem was clear. <del>To be lazy I replaced all EOFs with 255 and recompiled</del>. Passing <code>-fsigned-char</code> at compile time also works. With that, the program ran fine and no longer segfaulted.</p><p>C is truly deep and profound; you can never completely master it…</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.hljin.net/en-us/2014/10/autotools-play/ data-tooltip="autotools Tinkering Notes" aria-label="NEXT: autotools Tinkering Notes"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.hljin.net/en-us/2014/09/settle-down/ data-tooltip="Settle Down" aria-label="PREVIOUS: Settle Down"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#gitalk aria-label="Leave a comment"><i class="fa fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div id=gitalk><noscript>Please enable JavaScript to view the comments powered by Gitalk.</noscript></div><script src=https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.js integrity="sha512-EcTCcXV46teiNwe0VcnM5A038tcY+BaQYO4nW6Gh2i7v4/HjBVg7xx3+JBLl9WofDds//INJAiEGAtdgr8PWyA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script type=text/javascript>(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("gitalk").innerHTML="Gitalk comments not available by default when the website is previewed locally.";return}new Gitalk({clientID:"2d9c9d837f8496107211",clientSecret:"5a474517d0eb6d5abdb90ab9a31c2ba94f4f43b2",repo:"core2duoe6420.github.io",owner:"core2duoe6420",admin:["core2duoe6420"],id:"07d9e9681f4fb485505bac8ab2c0f0d6",...{distractionfreemode:!1,enablehotkey:!0,language:"zh-CN",pagerdirection:"first",perpage:10}}).render("gitalk")})()</script></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2025 Powered by Hugo with tranquilpeak. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.hljin.net/en-us/2014/10/autotools-play/ data-tooltip="autotools Tinkering Notes" aria-label="NEXT: autotools Tinkering Notes"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.hljin.net/en-us/2014/09/settle-down/ data-tooltip="Settle Down" aria-label="PREVIOUS: Settle Down"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#gitalk aria-label="Leave a comment"><i class="fa fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://res.cloudinary.com/core2duoe6420/image/upload/v1643906248/DSC_5117_wviusa.jpg alt="Author's picture"><h4 id=about-card-name>Alex King</h4><div id=about-card-bio>Observing without evaluating is the highest form of human intelligence</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Human</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Shanghai</div></div></div><div id=cover style=background-image:url(https://res.cloudinary.com/core2duoe6420/image/upload/v1643905455/20220204002352_yqvhwd.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://blog.hljin.net/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script async crossorigin=anonymous defer src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:"",useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(e,t){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(t)})})</script></body></html>